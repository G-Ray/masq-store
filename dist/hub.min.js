!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MasqHub=e()}}(function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return o(r||e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=!1,o=[],i=["get","set","del","clear","getAll","setAll"],a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n&&console.log(t)},s=(r.init=function(e){var t=!0;try{window.localStorage||(t=!1)}catch(e){t=!1}if(!t)try{return window.parent.postMessage({"cross-storage":"unavailable"},"*")}catch(e){return}n=e.debug,o=e.permissions||[],s(),window.parent.postMessage({"cross-storage":"ready"},"*"),a("Listening to clients...")},function(){window.addEventListener?window.addEventListener("message",l,!1):window.attachEvent("onmessage",l)}),l=function(e){var t=void 0,r=void 0,n=void 0,o=void 0,i=void 0,s=void 0;if(t="null"===e.origin?"file://":e.origin,"poll"===e.data["cross-storage"])return window.parent.postMessage({"cross-storage":"ready"},e.origin);if("ready"!==e.data["cross-storage"]){try{n=e.data}catch(e){return}if(n&&"string"==typeof n.method&&n.method){if(d(t,n.method))try{switch(a(n.method),n.method){case"get":i=c(t,n.params);break;case"set":i=f(t,n.params);break;case"del":i=u(t,n.params);break;case"clear":i=g(t,n.params);break;case"getAll":i=p(t,n.params);break;case"setAll":i=v(t,n.params)}}catch(e){o=e.message}else o="Invalid "+n.method+" permissions for "+t;s={client:n.client,error:o,result:i},a("Sendind response data:",s),r="file://"===t?"*":t,window.parent.postMessage(s,r)}}},d=function(e,t){var r=void 0,n=void 0;if(!w(t,i))return!1;for(r=0;r<o.length;r++)if((n=o[r]).origin instanceof RegExp&&n.allow instanceof Array&&n.origin.test(e)&&w(t,n.allow))return!0;return!1},f=r.set=function(e,t){var r=p(e);r[t.key]=t.value,window.localStorage.setItem(e,JSON.stringify(r))},c=r.get=function(e,t){var r=void 0,n=void 0,o=void 0;n=[],r=p(e);for(var i=0;i<t.keys.length;i++){try{o=r[t.keys[i]]}catch(e){o=null}n.push(o)}return n.length>1?n:n[0]},u=r.del=function(e,t){for(var r=p(e),n=0;n<t.keys.length;n++)delete r[t.keys[n]];window.localStorage.setItem(e,JSON.stringify(r))},g=r.clear=function(e){window.localStorage.removeItem(e)},p=r.getAll=function(e){var t=window.localStorage.getItem(e);if(!t||0===t.length)return{};try{return JSON.parse(t)}catch(e){return{}}},v=r.setAll=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},w=function(e,t){for(var r=0;r<t.length;r++)if(e===t[r])return!0;return!1}},{}]},{},[1])(1)});